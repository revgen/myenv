version: "3.9"
services:

  test-ubuntu:
    image: "rev9en/sandbox"
    volumes: [./:/opt/myenv]
    environment: [REPO_BRANCH=develop]
    working_dir: /opt/myenv
    command:
      - /bin/sh
      - -c
      - |
        ./install.sh --noninteractive && ./test-installation.sh


  test-debian:
    image: "bitnami/git"
    volumes: [./:/opt/myenv]
    command: /opt/myenv/install.sh --noninteractive

  test-alpine:
    image: "alpine"
    volumes: [./:/opt/myenv]
    command:
      - /bin/sh
      - -c
      - |
        apk add --no-cache git bash
        /opt/myenv/install.sh --noninteractive

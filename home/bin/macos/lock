#!/bin/sh
#=============================================================================
## Locking or suspending Apple Workstation
#=============================================================================
case "${1}" in
    help|--help|h|-h) sed -n '/^##/,/^$/s/^## \{0,1\}//p' "$0" | sed 's/{SCRIPT_NAME}/'"${0##*/}"'/g'; exit 255 ;;
esac

# Mute workstation first
osascript -e 'set volume output muted true'
pmset displaysleepnow

#if [ -n "$(ioreg -c AppleSmartBattery | grep '"ExternalConnected" = Yes')" ]; then
#  # Plugged in: start screensaver.
#  open /System/Library/Frameworks/ScreenSaver.framework/Versions/A/Resources/ScreenSaverEngine.app
#else
#  # Battery power: go to lock menu.
#  /System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend
#fi

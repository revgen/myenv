#!/bin/bash

play_file() {
    if [ "$(uname -s)" == "Darwin" ]; then
        fn=${1:-"/System/Library/Sounds/Glass.aiff"}
        echo "Playing '${fn}'..."
        afplay "${fn}"
    else
        fn=${1}
        echo "Playing '${fn}'..."
        if [ -n "$(which mplayer)" ]; then
            mplayer "${fn}"
        else
            if [ -n "$(which mpg123)" ]; then
                mpg123 "${fn}"
            else
                aplay "${fn}"
            fi
        fi
    fi
}
case "${1:-"test"}" in
    help|--help)
        echo "Play system audio sound for test purpouse."
        echo "Usage: $(basename "${0}") <help>"
        exit 1
        ;;
    test)
        if [ -f "${MYENVHOME}/home/music/stereo-test-left-right-01.mp3" ]; then
            play_file "${MYENVHOME}/home/music/stereo-test-left-right-01.mp3"
        else
            play_file ""
        fi
        echo "Done"
        ;;
    *) play_file "${1}";;
esac
